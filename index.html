<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IQ Neural Pro | Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
    <style>
        /* --- CSS Styles --- */
        :root {
            --primary: #00f3ff;
            --secondary: #bc13fe;
            --bg-dark: #050508;
            --glass: rgba(20, 20, 35, 0.85);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-muted: #a0a0b0;
            --success: #00ff9d; /* Ø£Ø®Ø¶Ø± Ù†ÙŠÙˆÙ† */
            --danger: #ff0055;  /* Ø£Ø­Ù…Ø± Ù†ÙŠÙˆÙ† */
            --timer-bg: rgba(255,255,255,0.1);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-dark);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(188, 19, 254, 0.15) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(0, 243, 255, 0.15) 0%, transparent 40%);
            color: var(--text-main);
            margin: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }

        .glass-container {
            width: 95%;
            max-width: 600px;
            min-height: 85vh;
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            padding: 1.5rem;
            position: relative;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.6);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Ø§Ù„Ù…Ø¤Ù‚Øª Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠ */
        .timer-container {
            position: relative;
            width: 80px;
            height: 80px;
            margin: 0 auto 20px auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .timer-svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }

        .timer-circle-bg {
            fill: none;
            stroke: var(--timer-bg);
            stroke-width: 6;
        }

        .timer-circle-progress {
            fill: none;
            stroke: var(--primary);
            stroke-width: 6;
            stroke-linecap: round;
            stroke-dasharray: 226; /* 2 * PI * 36 (radius) â‰ˆ 226 */
            stroke-dashoffset: 0;
            transition: stroke-dashoffset 1s linear, stroke 0.3s;
        }

        .timer-text {
            position: absolute;
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--text-main);
        }

        /* Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„Ù†ØµÙˆØµ */
        h1 {
            font-size: 1.8rem;
            text-align: center;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0 0 10px 0;
        }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ø®ÙŠØ§Ø±Ø§Øª */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            width: 100%;
            margin-top: 20px;
        }

        .option-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .option-card:hover { background: rgba(255, 255, 255, 0.1); }
        
        /* Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© (Ø£Ø®Ø¶Ø±/Ø£Ø­Ù…Ø±) */
        .option-card.correct {
            background: rgba(0, 255, 157, 0.2) !important;
            border-color: var(--success) !important;
            color: var(--success);
            font-weight: bold;
        }

        .option-card.wrong {
            background: rgba(255, 0, 85, 0.2) !important;
            border-color: var(--danger) !important;
            color: var(--danger);
            opacity: 0.8;
        }

        .option-card.disabled {
            pointer-events: none;
        }

        /* Ø²Ø± Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        .btn-start {
            background: linear-gradient(45deg, var(--secondary), var(--primary));
            border: none;
            color: #000;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.3);
        }

        /* Ø´Ø§Ø´Ø§Øª */
        .screen { display: none; width: 100%; opacity: 0; animation: fadeIn 0.5s forwards; }
        .screen.active { display: block; opacity: 1; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .progress-text { width: 100%; text-align: center; color: var(--text-muted); font-size: 0.9rem; margin-bottom: 5px; }
        
        /* Ù†ØªØ§Ø¦Ø¬ */
        .result-box {
            text-align: center;
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            margin-top: 20px;
        }
        .iq-score-large { font-size: 4rem; font-weight: bold; color: var(--primary); text-shadow: 0 0 20px rgba(0,243,255,0.4); }

    </style>
</head>
<body>

    <div class="glass-container">
        
        <div id="start-screen" class="screen active" style="text-align: center;">
            <div style="font-size: 4rem; margin-bottom: 10px;">ğŸ§ </div>
            <h1>Ø§Ø®ØªØ¨Ø§Ø± IQ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</h1>
            <p style="color: #ccc; line-height: 1.6;">
                ÙŠØªÙƒÙˆÙ† Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ù† <strong>25 Ø³Ø¤Ø§Ù„Ø§Ù‹</strong>.<br>
                Ù„Ø¯ÙŠÙƒ <strong>30 Ø«Ø§Ù†ÙŠØ©</strong> ÙÙ‚Ø· Ù„ÙƒÙ„ Ø³Ø¤Ø§Ù„.<br>
                Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨ØªØ­Ù„ÙŠÙ„ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ ÙˆØ³Ø±Ø¹ØªÙƒ.
            </p>
            <button class="btn-start" onclick="app.start()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
        </div>

        <div id="quiz-screen" class="screen">
            
            <div class="timer-container">
                <svg class="timer-svg" viewBox="0 0 80 80">
                    <circle class="timer-circle-bg" cx="40" cy="40" r="36"></circle>
                    <circle id="timer-progress" class="timer-circle-progress" cx="40" cy="40" r="36"></circle>
                </svg>
                <div id="timer-text" class="timer-text">30</div>
            </div>

            <div class="progress-text" id="q-counter">Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 25</div>
            
            <h3 id="question-text" style="text-align: center; min-height: 60px; font-size: 1.1rem; margin-bottom: 25px;">...</h3>

            <div id="options-container" class="options-grid">
                </div>
        </div>

        <div id="result-screen" class="screen" style="text-align: center;">
            <h1>Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h1>
            
            <div class="result-box">
                <div style="font-size: 0.9rem; color: #aaa;">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ</div>
                <div class="iq-score-large" id="final-iq">0</div>
                <div id="brain-title" style="color: var(--secondary); font-weight: bold; margin-top: 5px;">...</div>
            </div>

            <div style="text-align: right; margin-top: 20px; font-size: 0.9rem; line-height: 1.6; color: #ddd;">
                <p>ğŸ“Š <strong>ØªØ­Ù„ÙŠÙ„ AI:</strong> <span id="ai-msg">...</span></p>
                <p>âœ… <strong>Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©:</strong> <span id="correct-count">0</span> / 25</p>
                <p>âš¡ <strong>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ø±Ø¹Ø©:</strong> <span id="avg-speed">0</span> Ø«Ø§Ù†ÙŠØ©/Ø³Ø¤Ø§Ù„</p>
            </div>

            <button class="btn-start" onclick="location.reload()" style="font-size: 1rem; padding: 12px 30px;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
        </div>

    </div>

    <script>
        // --- 1. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (25 Ø³Ø¤Ø§Ù„) ---
        const DB = [
            // Logic & Math
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒÙ…Ù„ Ù„Ù„Ø³Ù„Ø³Ù„Ø©: 2, 4, 8, 16, ...ØŸ", options: ["24", "32", "30", "18"], correct: 1, type: "math" },
            { q: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø³Ø¹Ø± 3 Ø£Ù‚Ù„Ø§Ù… 15ØŒ ÙƒÙ… Ø³Ø¹Ø± 5 Ø£Ù‚Ù„Ø§Ù…ØŸ", options: ["20", "25", "30", "35"], correct: 1, type: "math" },
            { q: "Ø£Ø­Ù…Ø¯ Ø£Ø·ÙˆÙ„ Ù…Ù† Ø¹Ù„ÙŠØŒ ÙˆØ¹Ù„ÙŠ Ø£Ù‚ØµØ± Ù…Ù† Ø³Ø§Ù…ÙŠØŒ ÙˆØ³Ø§Ù…ÙŠ Ø£Ø·ÙˆÙ„ Ù…Ù† Ø£Ø­Ù…Ø¯. Ù…Ù† Ø§Ù„Ø£Ù‚ØµØ±ØŸ", options: ["Ø£Ø­Ù…Ø¯", "Ø¹Ù„ÙŠ", "Ø³Ø§Ù…ÙŠ", "Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ­Ø¯ÙŠØ¯"], correct: 1, type: "logic" },
            { q: "Ù…Ø§ Ù‡Ùˆ Ù†ØµÙ Ø±Ø¨Ø¹ Ø§Ù„Ø¹Ø¯Ø¯ 400ØŸ", options: ["100", "50", "25", "10"], correct: 1, type: "math" }, // 400/4 = 100, 100/2 = 50
            { q: "Ø´Ù‡Ø± ÙÙŠÙ‡ 28 ÙŠÙˆÙ…Ø§Ù‹ØŸ", options: ["ÙØ¨Ø±Ø§ÙŠØ± ÙÙ‚Ø·", "ÙƒÙ„ Ø§Ù„Ø£Ø´Ù‡Ø±", "ÙŠÙ†Ø§ÙŠØ±", "Ù„Ø§ ÙŠÙˆØ¬Ø¯"], correct: 1, type: "logic" }, // ÙƒÙ„ Ø§Ù„Ø£Ø´Ù‡Ø± ÙÙŠÙ‡Ø§ 28 ÙŠÙˆÙ… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
            
            // Pattern & Visual
            { q: "Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØºØ±ÙŠØ¨Ø©: (ØªÙØ§Ø­ØŒ Ø¨Ø±ØªÙ‚Ø§Ù„ØŒ Ø¬Ø²Ø±ØŒ Ù…ÙˆØ²)", options: ["ØªÙØ§Ø­", "Ø¨Ø±ØªÙ‚Ø§Ù„", "Ø¬Ø²Ø±", "Ù…ÙˆØ²"], correct: 2, type: "pattern" },
            { q: "Ø£ÙƒÙ…Ù„ Ø§Ù„Ù†Ù…Ø·: Ø£ØŒ ØªØŒ Ø¬ØŒ Ø®ØŒ ...", options: ["Ø¯", "Ø°", "Ø±", "Ø²"], correct: 0, type: "pattern" },
            { q: "Ø¥Ø°Ø§ ØªØ­Ø±Ùƒ Ø¹Ù‚Ø±Ø¨ Ø§Ù„Ø³Ø§Ø¹Ø© 180 Ø¯Ø±Ø¬Ø© Ù…Ù† Ø§Ù„Ø³Ø§Ø¹Ø© 3ØŒ ÙƒÙ… ØªÙƒÙˆÙ† Ø§Ù„Ø³Ø§Ø¹Ø©ØŸ", options: ["6", "9", "12", "3"], correct: 1, type: "visual" },
            { q: "Ø£ÙŠ Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ù„Ø§ ÙŠÙ†ØªÙ…ÙŠ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: (Ù…Ø±Ø¨Ø¹ØŒ Ù…Ø«Ù„Ø«ØŒ Ø¯Ø§Ø¦Ø±Ø©ØŒ Ù…Ø³ØªØ·ÙŠÙ„)", options: ["Ù…Ø±Ø¨Ø¹", "Ù…Ø«Ù„Ø«", "Ø¯Ø§Ø¦Ø±Ø©", "Ù…Ø³ØªØ·ÙŠÙ„"], correct: 2, type: "visual" }, // Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ù„ÙŠØ³ Ù„Ù‡Ø§ Ø²ÙˆØ§ÙŠØ§
            { q: "Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø¹Ø§ÙƒØ³ Ù„Ù„Ø£Ø¨ÙŠØ¶ Ù‡Ùˆ Ø§Ù„Ø£Ø³ÙˆØ¯ØŒ ÙÙ…Ø§ Ù…Ø¹Ø§ÙƒØ³ Ø§Ù„Ù†Ø§Ø±ØŸ", options: ["Ø«Ù„Ø¬", "Ù…Ø§Ø¡", "Ù‡ÙˆØ§Ø¡", "ØªØ±Ø§Ø¨"], correct: 1, type: "logic" },

            // Advanced Logic
            { q: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø£Ù…Ø³ Ù‡Ùˆ ØºØ¯Ø§Ù‹ØŒ Ù„ÙƒØ§Ù† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø³Ø¨Øª. ÙÙ…Ø§ Ù‡Ùˆ Ø§Ù„ÙŠÙˆÙ…ØŸ", options: ["Ø§Ù„Ø£Ø­Ø¯", "Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø¬Ù…Ø¹Ø©", "Ø§Ù„Ø®Ù…ÙŠØ³"], correct: 1, type: "logic" },
            { q: "Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø° ÙÙŠ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©: 3, 5, 7, 9, 11", options: ["5", "9", "7", "11"], correct: 1, type: "math" }, // 9 Ù„ÙŠØ³ Ø£ÙˆÙ„ÙŠ
            { q: "Ø£Ø¨ Ø¹Ù…Ø±Ù‡ 4 Ø£Ø¶Ø¹Ø§Ù Ø¹Ù…Ø± Ø§Ø¨Ù†Ù‡. Ø¨Ø¹Ø¯ 20 Ø³Ù†Ø© Ø³ÙŠØµØ¨Ø­ Ø¹Ù…Ø±Ù‡ Ø¶Ø¹Ù Ø¹Ù…Ø± Ø§Ø¨Ù†Ù‡. ÙƒÙ… Ø¹Ù…Ø± Ø§Ù„Ø£Ø¨ Ø§Ù„Ø¢Ù†ØŸ", options: ["32", "40", "36", "44"], correct: 1, type: "math" }, // Ø§Ù„Ø§Ø¨ 40ØŒ Ø§Ù„Ø§Ø¨Ù† 10. Ø¨Ø¹Ø¯ 20: 60 Ùˆ 30
            { q: "Ø¹Ù„Ø§Ù‚Ø© (ÙŠØ¯ : Ù‚ÙØ§Ø²) Ù…Ø«Ù„ Ø¹Ù„Ø§Ù‚Ø© (Ù‚Ø¯Ù… : ...)", options: ["Ø¬ÙˆØ±Ø¨", "Ø­Ø°Ø§Ø¡", "Ø£ØµØ¨Ø¹", "Ø±ÙƒØ¨Ø©"], correct: 0, type: "pattern" }, // Ø§Ù„Ù…Ù„Ø§Ù…Ø³ Ù„Ù„Ø¬Ù„Ø¯
            { q: "ÙƒÙ… ÙˆØ¬Ù‡Ø§Ù‹ Ù„Ù…ÙƒØ¹Ø¨ØŸ", options: ["4", "6", "8", "12"], correct: 1, type: "visual" },

            // Speed & Focus
            { q: "Ø­Ø§ØµÙ„ Ø¶Ø±Ø¨ 12 Ã— 12 ØŸ", options: ["124", "144", "142", "122"], correct: 1, type: "math" },
            { q: "Ø£ÙŠ Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª Ù„Ø§ ÙŠÙ„Ø¯ØŸ", options: ["Ø§Ù„Ø®ÙØ§Ø´", "Ø§Ù„Ø¯Ù„ÙÙŠÙ†", "Ø§Ù„Ø¹ØµÙÙˆØ±", "Ø§Ù„Ø­ÙˆØª"], correct: 2, type: "pattern" }, // Ø§Ù„Ø¹ØµÙÙˆØ± ÙŠØ¨ÙŠØ¶
            { q: "Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ÙØ© Ù„Ù€ 'Ù‚Ù†ÙˆØ·' Ù‡ÙŠ:", options: ["Ø£Ù…Ù„", "ÙŠØ£Ø³", "Ø³Ø¹Ø§Ø¯Ø©", "ØºØ¶Ø¨"], correct: 1, type: "verbal" },
            { q: "1, 1, 2, 3, 5, 8, ... Ù…Ø§ Ø§Ù„ØªØ§Ù„ÙŠØŸ", options: ["11", "12", "13", "15"], correct: 2, type: "math" }, // ÙÙŠØ¨ÙˆÙ†Ø§ØªØ´ÙŠ
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙƒÙ„Ù…Ø§ Ø£Ø®Ø°Øª Ù…Ù†Ù‡ ÙƒØ¨Ø±ØŸ", options: ["Ø§Ù„Ø¹Ù…Ø±", "Ø§Ù„Ø­ÙØ±Ø©", "Ø§Ù„Ù…Ø§Ù„", "Ø§Ù„Ø¨Ø­Ø±"], correct: 1, type: "logic" },

            // Final Challenge
            { q: "Ø¥Ø°Ø§ ÙƒÙ†Øª Ø§Ù„Ø£ÙˆÙ„ ÙÙŠ Ø³Ø¨Ø§Ù‚ ÙˆØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø«Ø§Ù†ÙŠØŒ ÙÙ…Ø§ Ù‡Ùˆ Ù…Ø±ÙƒØ²ÙƒØŸ", options: ["Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„Ø«Ø§Ù†ÙŠ", "Ø§Ù„Ø«Ø§Ù„Ø«", "Ø§Ù„Ø£Ø®ÙŠØ±"], correct: 0, type: "logic" }, // Ø³Ø¤Ø§Ù„ Ø®Ø¯Ø§Ø¹ØŒ Ø§Ø°Ø§ ÙƒÙ†Øª Ø§Ù„Ø§ÙˆÙ„ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø«Ø§Ù†ÙŠØŒ ÙˆÙ„ÙƒÙ† Ø§Ø°Ø§ ÙƒÙ†Øª ÙÙŠ Ø³Ø¨Ø§Ù‚ ÙˆØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø«Ø§Ù†ÙŠ ØªØµØ¨Ø­ Ø§Ù„Ø«Ø§Ù†ÙŠ. Ø§Ù„Ù†Øµ ÙŠÙ‚ÙˆÙ„ "ÙƒÙ†Øª Ø§Ù„Ø£ÙˆÙ„". (Ø³Ù†ÙØªØ±Ø¶ Ø§Ù„Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø´Ø§Ø¦Ø¹: ØªØ¬Ø§ÙˆØ²Øª Ù…Ù† ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø«Ø§Ù†ÙŠ) -> ØªØµØ¨Ø­ Ø§Ù„Ø«Ø§Ù†ÙŠ. *ØªØ¹Ø¯ÙŠÙ„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ù„ÙŠÙƒÙˆÙ† Ø£ÙˆØ¶Ø­*: "ÙÙŠ Ø³Ø¨Ø§Ù‚ØŒ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ Ø§Ù„Ø«Ø§Ù†ÙŠØŒ Ù…Ø§ Ù‡Ùˆ Ù…Ø±ÙƒØ²ÙƒØŸ"
            // Ø¯Ø¹Ù†Ø§ Ù†Ø¹Ø¯Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ù„ÙŠÙƒÙˆÙ† Ù…Ù†Ø·Ù‚ÙŠØ§Ù‹ ØªÙ…Ø§Ù…Ø§Ù‹ Ù„Ù„ÙƒÙˆØ¯:
            { q: "ÙÙŠ Ø³Ø¨Ø§Ù‚ Ø¬Ø±ÙŠØŒ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ù…ØªØ³Ø§Ø¨Ù‚ Ø§Ù„Ø°ÙŠ ÙÙŠ Ø§Ù„Ù…Ø±ÙƒØ² Ø§Ù„Ø«Ø§Ù†ÙŠ. Ù…Ø§ Ù‡Ùˆ Ù…Ø±ÙƒØ²Ùƒ Ø§Ù„Ø¢Ù†ØŸ", options: ["Ø§Ù„Ø£ÙˆÙ„", "Ø§Ù„Ø«Ø§Ù†ÙŠ", "Ø§Ù„Ø«Ø§Ù„Ø«", "Ù‚Ø¨Ù„ Ø§Ù„Ø£Ø®ÙŠØ±"], correct: 1, type: "logic" },
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø°ÙŠ ÙŠÙ‚Ø¨Ù„ Ø§Ù„Ù‚Ø³Ù…Ø© Ø¹Ù„Ù‰ 2ØŒ 3ØŒ 4ØŒ 5 Ù…Ø¹Ø§Ù‹ØŸ", options: ["30", "40", "60", "50"], correct: 2, type: "math" },
            { q: "Ø§Ù„Ù‚Ø·Ø© Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„ÙØ£Ø± Ù…Ø«Ù„ Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù€ ...", options: ["Ø§Ù„Ø´Ø¨ÙƒØ©", "Ø§Ù„Ø°Ø¨Ø§Ø¨Ø©", "Ø§Ù„Ø®ÙŠØ·", "Ø§Ù„Ø³Ù…"], correct: 1, type: "pattern" },
            { q: "ÙƒÙ„Ù…Ø© (Ø´Ù…Ø³) Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù€ (Ù†Ù‡Ø§Ø±) Ù…Ø«Ù„ (Ù‚Ù…Ø±) Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù€ ...", options: ["Ù„ÙŠÙ„", "Ù†Ø¬Ù…", "Ø³Ù…Ø§Ø¡", "Ø¸Ù„Ø§Ù…"], correct: 0, type: "pattern" },
            { q: "Ù†Ø§ØªØ¬ Ù‚Ø³Ù…Ø© 100 Ø¹Ù„Ù‰ Ù†ØµÙ Ù‡Ùˆ:", options: ["50", "200", "20", "100"], correct: 1, type: "math" } // 100 / 0.5 = 200
        ];

        // --- 2. Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„Ø¹Ø¨Ø© (Game Engine) ---
        const App = {
            state: {
                idx: 0,
                score: 0,
                answers: [],
                timer: null,
                timeLeft: 30,
                isProcessing: false // Ù„Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ù…ØªÙƒØ±Ø± Ø£Ø«Ù†Ø§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù„ÙˆØ§Ù†
            },

            start: function() {
                document.getElementById('start-screen').classList.remove('active');
                document.getElementById('quiz-screen').classList.add('active');
                this.loadQuestion();
            },

            loadQuestion: function() {
                // Reset State for new question
                this.state.isProcessing = false;
                this.state.timeLeft = 30;
                
                // Update UI
                const q = DB[this.state.idx];
                document.getElementById('q-counter').innerText = `Ø³Ø¤Ø§Ù„ ${this.state.idx + 1} Ù…Ù† ${DB.length}`;
                document.getElementById('question-text').innerText = q.q;
                
                // Render Options
                const container = document.getElementById('options-container');
                container.innerHTML = '';
                q.options.forEach((opt, i) => {
                    const div = document.createElement('div');
                    div.className = 'option-card';
                    div.id = `opt-${i}`;
                    div.innerHTML = `<span>${opt}</span>`;
                    div.onclick = () => this.checkAnswer(i);
                    container.appendChild(div);
                });

                // Start Timer
                this.updateTimerUI();
                clearInterval(this.state.timer);
                this.state.timer = setInterval(() => {
                    this.state.timeLeft--;
                    this.updateTimerUI();
                    
                    if (this.state.timeLeft <= 0) {
                        this.handleTimeout();
                    }
                }, 1000);
            },

            updateTimerUI: function() {
                const circle = document.getElementById('timer-progress');
                const text = document.getElementById('timer-text');
                const totalDash = 226;
                
                // Update Text
                text.innerText = this.state.timeLeft;

                // Update Circle (Green -> Yellow -> Red)
                const offset = totalDash - ((this.state.timeLeft / 30) * totalDash);
                circle.style.strokeDashoffset = offset;
                
                if (this.state.timeLeft > 15) circle.style.stroke = "var(--primary)";
                else if (this.state.timeLeft > 7) circle.style.stroke = "#ffd700";
                else circle.style.stroke = "var(--danger)";
            },

            checkAnswer: function(selectedIdx) {
                if (this.state.isProcessing) return;
                this.state.isProcessing = true;
                clearInterval(this.state.timer); // Stop timer

                const q = DB[this.state.idx];
                const correctIdx = q.correct;
                const isCorrect = (selectedIdx === correctIdx);

                // Visual Feedback (Green/Red)
                const options = document.querySelectorAll('.option-card');
                options.forEach(opt => opt.classList.add('disabled')); // Disable all

                // Always highlight the correct answer in Green
                document.getElementById(`opt-${correctIdx}`).classList.add('correct');

                // If user selected wrong, highlight theirs in Red
                if (!isCorrect && selectedIdx !== -1) {
                    document.getElementById(`opt-${selectedIdx}`).classList.add('wrong');
                }

                // Record Data
                if (isCorrect) this.state.score++;
                this.state.answers.push({
                    correct: isCorrect,
                    time: 30 - this.state.timeLeft,
                    type: q.type
                });

                // Wait 1 second then Next
                setTimeout(() => {
                    this.nextQuestion();
                }, 1000); // ØªØ£Ø®ÙŠØ± Ù„Ù…Ø¯Ø© Ø«Ø§Ù†ÙŠØ© Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø£Ù„ÙˆØ§Ù†
            },

            handleTimeout: function() {
                this.checkAnswer(-1); // -1 means no selection (Wrong)
            },

            nextQuestion: function() {
                this.state.idx++;
                if (this.state.idx < DB.length) {
                    this.loadQuestion();
                } else {
                    this.showResults();
                }
            },

            showResults: function() {
                document.getElementById('quiz-screen').classList.remove('active');
                document.getElementById('result-screen').classList.add('active');

                // AI Calculations
                const total = DB.length;
                const score = this.state.score;
                const accuracy = score / total;
                
                const totalTimeUsed = this.state.answers.reduce((a, b) => a + b.time, 0);
                const avgSpeed = (totalTimeUsed / total).toFixed(1);

                // IQ Formula: Base 85 + (Acc * 60) + Speed Bonus
                let iq = 80 + Math.round(accuracy * 60);
                if (accuracy > 0.7 && avgSpeed < 10) iq += 10;
                if (iq > 145) iq = 145; // Max Cap
                if (iq < 75) iq = 75;   // Min Floor

                // Archetype Logic
                let title = "Ù…ÙÙƒØ± Ù…Ø¨ØªØ¯Ø¦";
                let msg = "";

                if (iq >= 130) { title = "Ø¹Ø¨Ù‚Ø±ÙŠ (Genius)"; msg = "Ø£Ø¯Ø§Ø¡ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ! ØªÙ…Ù„Ùƒ Ø³Ø±Ø¹Ø© Ø¨Ø¯ÙŠÙ‡Ø© ÙˆÙ…Ù†Ø·Ù‚Ø§Ù‹ Ø­Ø¯ÙŠØ¯ÙŠØ§Ù‹."; }
                else if (iq >= 115) { title = "Ù…Ø­Ù„Ù„ Ø¨Ø§Ø±Ø¹"; msg = "Ø°ÙƒØ§Ø¡ ÙÙˆÙ‚ Ø§Ù„Ù…ØªÙˆØ³Ø·. ØªÙˆØ§Ø²Ù† Ù…Ù…ØªØ§Ø² Ø¨ÙŠÙ† Ø§Ù„Ø¯Ù‚Ø© ÙˆØ§Ù„Ø³Ø±Ø¹Ø©."; }
                else if (iq >= 100) { title = "Ù…ÙÙƒØ± Ù…Ù†Ø·Ù‚ÙŠ"; msg = "Ù…Ø³ØªÙˆÙ‰ Ø°ÙƒØ§Ø¡ Ø·Ø¨ÙŠØ¹ÙŠ ÙˆØ¬ÙŠØ¯. Ù„Ø¯ÙŠÙƒ Ù‚Ø¯Ø±Ø§Øª ØªØ­Ù„ÙŠÙ„ÙŠØ© ÙˆØ§Ø¶Ø­Ø©."; }
                else { title = "Ù…ÙÙƒØ± Ø¹Ù…Ù„ÙŠ"; msg = "Ø­Ø§ÙˆÙ„ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø£ÙƒØ«Ø± ÙˆØªØ¬Ù†Ø¨ Ø§Ù„ØªØ³Ø±Ø¹ ÙÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©."; }

                // Display
                document.getElementById('final-iq').innerText = iq;
                document.getElementById('brain-title').innerText = title;
                document.getElementById('ai-msg').innerText = msg;
                document.getElementById('correct-count').innerText = score;
                document.getElementById('avg-speed').innerText = avgSpeed;
            }
        };
        
        // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
        document.addEventListener('dblclick', function(event) {
            event.preventDefault();
        }, { passive: false });
        
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        window.app = App;
    </script>
</body>
</html>
