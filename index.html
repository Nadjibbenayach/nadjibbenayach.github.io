<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MASTER AI QUIZ ENGINE</title>

<style>
:root{
--bg:#050505;--card:#101010;--accent:#00ff9d;
--danger:#ff004c;--text:#fff;
}
*{box-sizing:border-box;font-family:Segoe UI}
body{
margin:0;height:100vh;background:var(--bg);
display:flex;justify-content:center;align-items:center;color:var(--text)
}
#app{width:100%;max-width:520px;height:100%;position:relative;background:#000}
.screen{position:absolute;inset:0;display:none;flex-direction:column;
justify-content:center;align-items:center;padding:20px}
.screen.active{display:flex}
.btn{
background:var(--accent);color:#000;border:none;
padding:14px 40px;border-radius:40px;font-weight:bold
}
.option{
width:100%;padding:15px;border-radius:12px;
background:rgba(255,255,255,.08);margin:6px 0;cursor:pointer
}
.option.correct{background:rgba(0,255,157,.4)}
.option.wrong{background:rgba(255,0,76,.4)}
#hud{
position:absolute;top:0;width:100%;display:flex;
justify-content:space-between;padding:10px;background:#000c
}
</style>
</head>

<body>
<div id="app">

<!-- HOME -->
<div id="scr-home" class="screen active">
<h1>MASTER AI</h1>
<button class="btn" onclick="GAME.start('iq')">ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø°ÙƒØ§Ø¡</button>
<button class="btn" onclick="GAME.start('football')">âš½ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…</button>
</div>

<!-- GAME -->
<div id="scr-game" class="screen">
<div id="hud">
<span id="lvl"></span>
<span id="timer"></span>
</div>
<h2 id="question"></h2>
<div id="options"></div>
</div>

<!-- RESULT -->
<div id="scr-result" class="screen">
<h1>Ø§Ù„Ù†ØªÙŠØ¬Ø©</h1>
<h2 id="score"></h2>
<button class="btn" onclick="location.reload()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

</div>

<script>
/* =====================================================
   QUESTION GENERATOR (IQ + FOOTBALL)
===================================================== */

function generateIQ(){
let arr=[];
let id=0;
for(let l=1;l<=4;l++){
for(let i=1;i<=120;i++){
let a=Math.floor(Math.random()*20)+1;
let b=Math.floor(Math.random()*20)+1;
let correct=a+b;
arr.push({
id:"iq_"+(id++),
level:l,
q:`Ù…Ø§ Ù†Ø§ØªØ¬ ${a} + ${b} ØŸ`,
o:[correct,correct+1,correct-1,correct+2].sort(()=>Math.random()-0.5),
c:0
});
arr[arr.length-1].c=
arr[arr.length-1].o.indexOf(correct);
}}
return arr;
}

function generateFootball(){
const facts=[
["ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†ØŸ",["9","10","11","12"],2],
["ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… ÙƒÙ„ ÙƒÙ… Ø³Ù†Ø©ØŸ",["2","3","4","5"],2],
["Ø£ÙƒØ«Ø± Ù…Ù†ØªØ®Ø¨ ÙØ§Ø² Ø¨Ø§Ù„Ù…ÙˆÙ†Ø¯ÙŠØ§Ù„ØŸ",["Ø£Ù„Ù…Ø§Ù†ÙŠØ§","Ø¥ÙŠØ·Ø§Ù„ÙŠØ§","Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„","ÙØ±Ù†Ø³Ø§"],2],
["Ù…Ø¯Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŸ",["80","85","90","100"],2]
];
let arr=[];
let id=0;
for(let l=1;l<=4;l++){
for(let i=0;i<facts.length;i++){
arr.push({
id:"fb_"+(id++),
level:l,
q:facts[i][0],
o:facts[i][1],
c:facts[i][2]
});
}}
return arr;
}

const DB={
iq:generateIQ(),          // â‰ˆ 480 Ø³Ø¤Ø§Ù„
football:generateFootball() // Ã—4 Ù…Ø³ØªÙˆÙŠØ§Øª
};

/* =====================================================
   NO REPEAT AI
===================================================== */

const USED={
session:new Set(),
global:()=>new Set(JSON.parse(localStorage.getItem("USED")||"[]")),
mark(id){
this.session.add(id);
let g=this.global();g.add(id);
localStorage.setItem("USED",JSON.stringify([...g]));
},
used(id){
return this.session.has(id)||this.global().has(id);
}
};

/* =====================================================
   GAME ENGINE
===================================================== */

const GAME={
mode:null,level:1,index:0,score:0,pool:[],time:15,timer:null,

start(m){
this.mode=m;this.level=1;this.index=0;this.score=0;
USED.session.clear();
this.load();
this.show("game");
},

load(){
this.pool=DB[this.mode]
.filter(q=>q.level===this.level&&!USED.used(q.id))
.sort(()=>Math.random()-0.5)
.slice(0,10);
this.index=0;
this.render();
},

render(){
if(!this.pool[this.index]){this.end();return;}
let q=this.pool[this.index];
document.getElementById("lvl").innerText="LEVEL "+this.level;
document.getElementById("question").innerText=q.q;
document.getElementById("options").innerHTML=
q.o.map((t,i)=>`<div class="option"
onclick="GAME.answer(${i},this)">${t}</div>`).join("");
this.runTimer();
},

runTimer(){
clearInterval(this.timer);
this.time=15;
document.getElementById("timer").innerText=this.time;
this.timer=setInterval(()=>{
this.time--;
document.getElementById("timer").innerText=this.time;
if(this.time<=0){clearInterval(this.timer);this.next();}
},1000);
},

answer(i,el){
clearInterval(this.timer);
let q=this.pool[this.index];
USED.mark(q.id);
if(i===q.c){el.classList.add("correct");this.score+=10}
else{
el.classList.add("wrong");
document.querySelectorAll(".option")[q.c].classList.add("correct");
}
setTimeout(()=>this.next(),800);
},

next(){
this.index++;
this.render();
},

end(){
this.show("result");
document.getElementById("score").innerText="Ø§Ù„Ù†Ù‚Ø§Ø·: "+this.score;
},

show(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
document.getElementById("scr-"+id).classList.add("active");
}
};
</script>
</body>
</html>
