<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mastermind Ultimate</title>

<style>
:root{
--bg:#0a0a0a;
--primary:#00ff9d;
--danger:#ff004c;
--card:rgba(255,255,255,.06);
--text:#fff;
}
*{box-sizing:border-box;font-family:Segoe UI;user-select:none}
body{
margin:0;height:100vh;background:#000;color:var(--text);
display:flex;justify-content:center;align-items:center;
}
.app{width:100%;max-width:500px;height:100%;position:relative}
.screen{
position:absolute;inset:0;display:none;
flex-direction:column;align-items:center;justify-content:center;
padding:20px;
}
.screen.active{display:flex}
.card{
width:100%;background:var(--card);padding:20px;
border-radius:14px;margin:10px 0;cursor:pointer
}
.btn{
background:var(--primary);border:none;
padding:14px 40px;border-radius:40px;
font-size:1.1rem;font-weight:bold;cursor:pointer
}
.opt{
width:100%;padding:15px;border-radius:10px;
background:rgba(255,255,255,.08);
margin:6px 0;text-align:center;cursor:pointer
}
.opt.correct{background:rgba(0,255,157,.25)}
.opt.wrong{background:rgba(255,0,76,.25)}
.hud{
position:absolute;top:0;width:100%;
display:flex;justify-content:space-between;
padding:12px;background:#0009
}
.timer{font-size:1.4rem;margin:20px}
</style>
</head>

<body>
<div class="app">

<!-- HOME -->
<div id="home" class="screen active">
<h1>MASTERMIND</h1>
<div class="card" onclick="ENGINE.start('football')">âš½ ØªØ­Ø¯ÙŠ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…</div>
<div class="card" onclick="ENGINE.start('iq')">ðŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø°ÙƒØ§Ø¡</div>
</div>

<!-- GAME -->
<div id="game" class="screen">
<div class="hud">
<span id="lvl">LEVEL 1</span>
<span id="prog">1/10</span>
</div>
<div class="timer" id="timer">15</div>
<div id="question"></div>
<div id="options"></div>
</div>

<!-- PASS -->
<div id="pass" class="screen">
<h1>ðŸŽ‰ Ù…Ø³ØªÙˆÙ‰ Ù…ÙƒØªÙ…Ù„</h1>
<button class="btn" onclick="ENGINE.next()">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>

<!-- RESULT -->
<div id="result" class="screen">
<h1 id="resTitle"></h1>
<h2 id="resScore"></h2>
<button class="btn" onclick="location.reload()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

</div>

<script>
// ================= DATABASE =================
const DB = {
football: DB_FOOT,   // Ø¶Ø¹ Ù‚Ø§Ø¹Ø¯Ø© ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… Ù‡Ù†Ø§ ÙƒØ§Ù…Ù„Ø©
iq: RAW_IQ           // Ø¶Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ù‡Ù†Ø§ ÙƒØ§Ù…Ù„Ø©
};

// ================= ENGINE =================
const ENGINE = {
mode:null, level:1, idx:0, score:0, pool:[], timer:null, time:15,

start(mode){
this.mode=mode;this.level=1;this.score=0;
this.loadLevel();
},

loadLevel(){
this.pool = DB[this.mode].filter(q=>q[0]===this.level)
.sort(()=>Math.random()-0.5).slice(0,10);
this.idx=0;
this.show('game');
this.render();
},

render(){
if(!this.pool[this.idx]){ this.finish(true); return; }
document.getElementById('lvl').innerText='LEVEL '+this.level;
document.getElementById('prog').innerText=(this.idx+1)+'/10';
document.getElementById('question').innerText=this.pool[this.idx][1];

let opts='';
for(let i=0;i<4;i++){
opts+=`<div class="opt" onclick="ENGINE.answer(${i},this)">
${this.pool[this.idx][2+i]}</div>`;
}
document.getElementById('options').innerHTML=opts;
this.runTimer();
},

answer(i,el){
clearInterval(this.timer);
let c=this.pool[this.idx][6];
document.querySelectorAll('.opt').forEach(o=>o.classList.add('disabled'));
if(i===c){el.classList.add('correct');this.score++}
else{el.classList.add('wrong')}
setTimeout(()=>{this.idx++;this.render()},800);
},

runTimer(){
clearInterval(this.timer);
this.time=this.mode==='iq'?30:15;
document.getElementById('timer').innerText=this.time;
this.timer=setInterval(()=>{
this.time--;
document.getElementById('timer').innerText=this.time;
if(this.time<=0){clearInterval(this.timer);this.idx++;this.render()}
},1000);
},

next(){
this.level++;
if(this.level>4)this.finish(true);
else this.loadLevel();
},

finish(win){
this.show('result');
document.getElementById('resTitle').innerText=win?'ðŸ† ÙÙˆØ²':'âŒ Ø®Ø³Ø§Ø±Ø©';
document.getElementById('resScore').innerText='Ø§Ù„Ù†ØªÙŠØ¬Ø©: '+this.score;
},

show(id){
document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
document.getElementById(id).classList.add('active');
}
};
</script>
</body>
</html>
